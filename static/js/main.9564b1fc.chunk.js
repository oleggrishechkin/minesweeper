(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{10:function(e,t,n){e.exports={settings:"Settings_settings__3U6ep"}},11:function(e,t,n){e.exports={statistics:"Statistics_statistics__2QFok"}},12:function(e,t,n){e.exports={app:"App_app__1kX79"}},17:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(8),c=(n(17),n(5)),i=n(4),a=n(1),l=Object(a.createSignal)(null),u=Object(a.createSignal)(null),s=function(e){var t=e.width,n=e.height,o=e.overscan,c=void 0===o?0:o,a=Object(r.useRef)(null),l=Object(r.useState)((function(){return{fromRow:0,toRow:0,fromCol:0,toCol:0}})),u=Object(i.a)(l,2),s=u[0],b=u[1];return Object(r.useEffect)((function(){var e;return function r(){if(a.current){var o=a.current.getBoundingClientRect(),i=Math.max(Math.floor(a.current.scrollTop/n)-c,0),l=Math.max((Math.ceil(a.current.scrollTop+o.height)+c)/n,0),u=Math.max(Math.floor(a.current.scrollLeft/t)-c,0),s=Math.max((Math.ceil(a.current.scrollLeft+o.width)+c)/t,0);b((function(e){return e.fromRow===i&&e.toRow===l&&e.fromCol===u&&e.toCol===s?e:{fromRow:i,toRow:l,fromCol:u,toCol:s}}))}e=requestAnimationFrame(r)}(),function(){cancelAnimationFrame(e)}}),[n,t]),[a,s]},b=n(3),f=Object(a.createSignal)(null),j=Object(a.createSignal)(0),O=function(e){for(var t=l(),n=0,r=-1;r<=1;r++)for(var o=-1;o<=1;o++){var c,i;null!==t&&void 0!==t&&null!==(c=t[o+e.row])&&void 0!==c&&null!==(i=c[r+e.col])&&void 0!==i&&i.isBomb&&n++}return n},d=function(e){var t=l();if(t&&e&&!e.isOpened&&!e.isFlag){var n=new Set([e]);n.forEach((function(e){if(e.isOpened=!0,e.bombCount=O(e),Object(b.mut)(e),j((function(e){return e-1})),!e.bombCount)for(var r=-1;r<=1;++r)for(var o=-1;o<=1;++o){var c,i=null===(c=t[o+e.row])||void 0===c?void 0:c[r+e.col];!i||i.isOpened||i.isFlag||n.add(i)}}))}},v=Object(a.createSignal)(0),g=Object(a.createSignal)(30),h=Object(a.createSignal)(99),m=Object(a.createSignal)(16),p=function(e,t){for(var n,r=g(),o=m(),c=h(),a=[],u=0,s=0,b=[];s<o;++s)for(a[s]=[],n=0;n<r;++n)s===e&&t===n||b.push([s,n]),a[s][n]={id:"[".concat(s,"][").concat(n,"]"),row:s,col:n,bombCount:0,isBomb:!1,isFlag:!1,isOpened:!1};for(;u<c;){var f=b.splice(Math.floor(Math.random()*b.length),1),O=Object(i.a)(f,1)[0];a[O[0]][O[1]].isBomb=!0,++u}l(a),v(c),j(r*o-c)},x=Object(a.createSignal)(null),w=function(){var e=l();if(e)for(var t=e.length,n=e[0].length,r=0;r<t;r++)for(var o=0;o<n;o++){var c=e[r][o];c.isBomb&&(c.isOpened=!0,Object(b.mut)(c))}},S=function(){f()&&(x(Date.now()),u("lose"),w())},B=function(){var e=l();if(e)for(var t=e.length,n=e[0].length,r=0;r<t;r++)for(var o=0;o<n;o++){var c=e[r][o];c.isBomb&&(c.isFlag=!0,Object(b.mut)(c))}},C=function(){f()&&(x(Date.now()),u("win"),B())},M=function(e){f()||(e.isBomb&&(p(e.row,e.col),e=l()[e.row][e.col]),f(Date.now())),e.isOpened||e.isFlag||(e.isBomb?S():(d(e),0===j()&&C()))},_=function(e){var t=l();if(!t)return 0;for(var n=0,r=!1,o=-1;o<=1;o++)for(var c=-1;c<=1;c++){var i,a=null===(i=t[c+e.row])||void 0===i?void 0:i[o+e.col];null!==a&&void 0!==a&&a.isFlag?n++:null!==a&&void 0!==a&&a.isBomb&&(r=!0)}return n===e.bombCount?r?-1:1:0},F=function(e){var t=l();if(t)for(var n=-1;n<=1;n++)for(var r=-1;r<=1;r++){var o;d(null===(o=t[r+e.row])||void 0===o?void 0:o[n+e.col])}},k=function(e){if(f())switch(_(e)){case-1:return void S();case 1:F(e),0===j()&&C()}},R=function(e){var t=e.isFlag;e.isFlag=!t,Object(b.mut)(e),v((function(e){return e+(t?1:-1)}))},y=function(e){f()&&!e.isOpened&&(e.isFlag||v()>0)&&R(e)},E=20,D={1:"blue",2:"green",3:"red",4:"purple",5:"maroon",6:"turquoise",7:"black",8:"gray"},N=n(9),T=n.n(N),V=n(0),A=function(e){return e.isOpened?e.isBomb?e.isFlag?"\u2705":"\ud83d\udca3":e.bombCount||"":e.isFlag?"\ud83d\udea9":null},I=function(e){var t=e.cell;return Object(b.useMut)(t),Object(V.jsx)("div",{className:T.a.cell,style:Object(c.a)(Object(c.a)(Object(c.a)({top:t.row*E,left:t.col*E,width:E,height:E,background:t.isOpened?"aliceblue":"lightgray",color:D[t.bombCount||0]},0===t.row?{borderTop:"1px solid black"}:{}),0===t.col?{borderLeft:"1px solid black"}:{}),t.isOpened?{pointerEvents:"none"}:{}),onClick:function(){M(t)},onDoubleClick:function(){k(t)},onContextMenu:function(e){e.preventDefault(),y(t)},children:A(t)})},L=function(){p(),f(null),x(null),u(null)},q=function(){return Object(a.useSignalEffect)(L,[])},J=n(7),Y=n.n(J),H=function(){var e=Object(a.useSignal)(l),t=Object(a.useSignal)(u),n=s({width:E,height:E,overscan:5}),o=Object(i.a)(n,2),b=o[0],f=o[1];if(q(),!e)return Object(V.jsx)(r.Fragment,{});for(var j=e.length,O=e[0].length*E,d=j*E,v=[],g=f.fromRow;g<f.toRow&&g<e.length;g++)for(var h=f.fromCol;h<f.toCol&&h<e[0].length;h++){var m=e[g][h];v.push(Object(V.jsx)(I,{cell:m},m.id))}return Object(V.jsx)("section",{ref:b,className:Y.a.board,children:Object(V.jsx)("div",{className:Y.a.innerBoard,style:Object(c.a)({width:O,height:d},t?{pointerEvents:"none"}:{}),children:v})})},Q=function(){var e=Object(a.useSignal)(g);return Object(V.jsxs)("label",{children:["Width:",Object(V.jsx)("input",{defaultValue:e,type:"number",onBlur:function(e){return g(Math.max(8,+(e.target.value||0)))},min:8},e)]})},U=function(){var e=Object(a.useSignal)(m);return Object(V.jsxs)("label",{children:["Height:",Object(V.jsx)("input",{defaultValue:e,type:"number",onBlur:function(e){return m(Math.max(8,+(e.target.value||0)))},min:8},e)]})},W=function(){var e=Object(a.useSignal)(h),t=Object(a.useSignal)(g),n=Object(a.useSignal)(m);return Object(V.jsxs)("label",{children:["Bomb count:",Object(V.jsx)("input",{defaultValue:e,type:"number",onBlur:function(e){return h(Math.min(Math.max(0,+(e.target.value||0)),t*n-1))},min:0,max:t*n-1},e)]})},X=n(10),Z=n.n(X),z=function(){return Object(V.jsxs)("div",{className:Z.a.settings,children:[Object(V.jsx)(Q,{}),Object(V.jsx)(U,{}),Object(V.jsx)(W,{})]})},G=function(){var e=Object(r.useReducer)((function(e){return e+1}),0),t=Object(i.a)(e,2)[1],n=Object(a.useSignal)(f),o=Object(a.useSignal)(x);return Object(r.useEffect)((function(){var e;return!o&&n&&(e=setInterval((function(){t()}),1e3)),function(){clearInterval(e)}}),[n,o]),Object(V.jsxs)("span",{children:["Time:",n?Math.floor(((o||Date.now())-n)/1e3):0]})},K=function(){var e=Object(a.useSignal)(u);return Object(V.jsx)("button",{onClick:L,children:"win"===e?"\ud83d\ude0e":"lose"===e?"\ud83d\ude35":"\ud83d\ude0a"})},P=function(){var e=Object(a.useSignal)(h),t=Object(a.useSignal)(v),n=Object(a.useSignal)(f);return Object(V.jsxs)("span",{children:["Flags:",n?t:e]})},$=n(11),ee=n.n($),te=function(){return Object(V.jsxs)("div",{className:ee.a.statistics,children:[Object(V.jsx)(P,{}),Object(V.jsx)(K,{}),Object(V.jsx)(G,{})]})},ne=n(12),re=n.n(ne),oe=function(){return Object(V.jsxs)("main",{className:re.a.app,children:[Object(V.jsx)(z,{}),Object(V.jsx)(te,{}),Object(V.jsx)(H,{})]})};Object(o.render)(Object(V.jsx)(r.StrictMode,{children:Object(V.jsx)(oe,{})}),document.getElementById("root"))},7:function(e,t,n){e.exports={board:"Board_board__1Y7VT",innerBoard:"Board_innerBoard__2YZye"}},9:function(e,t,n){e.exports={cell:"Cell_cell__3-ueS"}}},[[27,1,2]]]);
//# sourceMappingURL=main.9564b1fc.chunk.js.map