(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{10:function(e,t,n){e.exports={statistics:"Statistics_statistics__2QFok"}},11:function(e,t,n){e.exports={app:"App_app__1kX79"}},16:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(7),c=(n(16),n(4)),a=n(3),i=n(0),u=Object(i.createSignal)(null),l=Object(i.createSignal)(null),s=function(e){var t=e.width,n=e.height,o=e.overscan,c=void 0===o?0:o,i=Object(r.useRef)(null),u=Object(r.useState)((function(){return{fromRow:0,toRow:0,fromCol:0,toCol:0}})),l=Object(a.a)(u,2),s=l[0],b=l[1];return Object(r.useEffect)((function(){var e;return function r(){if(i.current){var o=i.current.getBoundingClientRect(),a=Math.max(Math.floor(i.current.scrollTop/n)-c,0),u=Math.max((Math.ceil(i.current.scrollTop+o.height)+c)/n,0),l=Math.max(Math.floor(i.current.scrollLeft/t)-c,0),s=Math.max((Math.ceil(i.current.scrollLeft+o.width)+c)/t,0);b((function(e){return e.fromRow===a&&e.toRow===u&&e.fromCol===l&&e.toCol===s?e:{fromRow:a,toRow:u,fromCol:l,toCol:s}}))}e=requestAnimationFrame(r)}(),function(){cancelAnimationFrame(e)}}),[n,t]),[i,s]},b=Object(i.createSignal)(null),f=Object(i.createSignal)(0),j=function(e){for(var t=u(),n=0,r=-1;r<=1;r++)for(var o=-1;o<=1;o++){var c,a;(null===t||void 0===t||null===(c=t[o+e.row])||void 0===c||null===(a=c[r+e.col])||void 0===a?void 0:a.isBomb)&&n++}return n},d=function(e){var t=u();if(t&&e&&!e.isOpened&&!e.isFlag){var n=new Set([e]);n.forEach((function(e){if(e.isOpened=!0,e.bombCount=j(e),Object(i.mutated)(e),f((function(e){return e-1})),!e.bombCount)for(var r=-1;r<=1;++r)for(var o=-1;o<=1;++o){var c,a=null===(c=t[o+e.row])||void 0===c?void 0:c[r+e.col];!a||a.isOpened||a.isFlag||n.add(a)}}))}},g=Object(i.createSignal)(0),O=Object(i.createSignal)(30),v=Object(i.createSignal)(99),m=Object(i.createSignal)(16),h=function(e,t){for(var n,r=O(),o=m(),c=v(),i=[],l=0,s=0,b=[];s<o;++s)for(i[s]=[],n=0;n<r;++n)s===e&&t===n||b.push([s,n]),i[s][n]={id:"[".concat(s,"][").concat(n,"]"),row:s,col:n,bombCount:0,isBomb:!1,isFlag:!1,isOpened:!1};for(;l<c;){var j=b.splice(Math.floor(Math.random()*b.length),1),d=Object(a.a)(j,1)[0];i[d[0]][d[1]].isBomb=!0,++l}u(i),g(c),f(r*o-c)},p=Object(i.createSignal)(null),x=function(){var e=u();if(e)for(var t=e.length,n=e[0].length,r=0;r<t;r++)for(var o=0;o<n;o++){var c=e[r][o];c.isBomb&&(c.isOpened=!0,Object(i.mutated)(c))}},w=function(){b()&&(p(Date.now()),l("lose"),x())},B=function(){var e=u();if(e)for(var t=e.length,n=e[0].length,r=0;r<t;r++)for(var o=0;o<n;o++){var c=e[r][o];c.isBomb&&(c.isFlag=!0,Object(i.mutated)(c))}},C=function(){b()&&(p(Date.now()),l("win"),B())},T=function(e){b()||(e.isBomb&&(h(e.row,e.col),e=u()[e.row][e.col]),b(Date.now())),e.isOpened||e.isFlag||(e.isBomb?w():(d(e),0===f()&&C()))},_=function(e){var t=u();if(!t)return 0;for(var n=0,r=!1,o=-1;o<=1;o++)for(var c=-1;c<=1;c++){var a,i=null===(a=t[c+e.row])||void 0===a?void 0:a[o+e.col];(null===i||void 0===i?void 0:i.isFlag)?n++:(null===i||void 0===i?void 0:i.isBomb)&&(r=!0)}return n===e.bombCount?r?-1:1:0},M=function(e){var t=u();if(t)for(var n=-1;n<=1;n++)for(var r=-1;r<=1;r++){var o;d(null===(o=t[r+e.row])||void 0===o?void 0:o[n+e.col])}},F=function(e){if(b())switch(_(e)){case-1:return void w();case 1:M(e),0===f()&&C()}},S=function(e){var t=e.isFlag;e.isFlag=!t,Object(i.mutated)(e),g((function(e){return e+(t?1:-1)}))},k=function(e){b()&&!e.isOpened&&(e.isFlag||g()>0)&&S(e)},R=20,y={1:"blue",2:"green",3:"red",4:"purple",5:"maroon",6:"turquoise",7:"black",8:"gray"},E=n(8),D=n.n(E),N=n(1),V=function(e){return e.isOpened?e.isBomb?e.isFlag?"\u2705":"\ud83d\udca3":e.bombCount||"":e.isFlag?"\ud83d\udea9":null},A=function(e){var t=e.cell;return Object(i.useTagged)(t),Object(N.jsx)("div",{className:D.a.cell,style:Object(c.a)(Object(c.a)({top:t.row*R,left:t.col*R,width:R,height:R,background:t.isOpened?"aliceblue":"lightgray",color:y[t.bombCount||0]},0===t.row?{borderTop:"1px solid black"}:{}),0===t.col?{borderLeft:"1px solid black"}:{}),onClick:function(){T(t)},onDoubleClick:function(){F(t)},onContextMenu:function(e){e.preventDefault(),k(t)},children:V(t)})},I=function(){h(),b(null),p(null),l(null)},L=function(){Object(r.useEffect)((function(){return Object(i.createEffect)((function(){I()}))}),[])},q=n(6),J=n.n(q),Y=function(){var e=Object(i.useTagged)(u),t=Object(i.useTagged)(l),n=s({width:R,height:R,overscan:5}),o=Object(a.a)(n,2),b=o[0],f=o[1];if(L(),!e)return Object(N.jsx)(r.Fragment,{});for(var j=e.length,d=e[0].length*R,g=j*R,O=[],v=f.fromRow;v<f.toRow&&v<e.length;v++)for(var m=f.fromCol;m<f.toCol&&m<e[0].length;m++){var h=e[v][m];O.push(Object(N.jsx)(A,{cell:h},h.id))}return Object(N.jsxs)("section",{ref:b,className:J.a.board,children:[Object(N.jsx)("div",{className:J.a.innerBoard,style:Object(c.a)({width:d,height:g},t?{pointerEvents:"none"}:{})}),O]})},H=function(){var e=Object(i.useTagged)(O);return Object(N.jsxs)("label",{children:["Width:",Object(N.jsx)("input",{defaultValue:e,type:"number",onBlur:function(e){return O(Math.max(8,+(e.target.value||0)))},min:8},e)]})},Q=function(){var e=Object(i.useTagged)(m);return Object(N.jsxs)("label",{children:["Height:",Object(N.jsx)("input",{defaultValue:e,type:"number",onBlur:function(e){return m(Math.max(8,+(e.target.value||0)))},min:8},e)]})},U=function(){var e=Object(i.useTagged)(v),t=Object(i.useTagged)(O),n=Object(i.useTagged)(m);return Object(N.jsxs)("label",{children:["Bomb count:",Object(N.jsx)("input",{defaultValue:e,type:"number",onBlur:function(e){return v(Math.min(Math.max(0,+(e.target.value||0)),t*n-1))},min:0,max:t*n-1},e)]})},W=n(9),X=n.n(W),Z=function(){return Object(N.jsxs)("div",{className:X.a.settings,children:[Object(N.jsx)(H,{}),Object(N.jsx)(Q,{}),Object(N.jsx)(U,{})]})},z=function(){var e=Object(r.useReducer)((function(e){return e+1}),0),t=Object(a.a)(e,2)[1],n=Object(i.useTagged)(b),o=Object(i.useTagged)(p);return Object(r.useEffect)((function(){var e;return!o&&n&&(e=setInterval((function(){t()}),1e3)),function(){clearInterval(e)}}),[n,o]),Object(N.jsxs)("span",{children:["Time:",n?Math.floor(((o||Date.now())-n)/1e3):0]})},G=function(){var e=Object(i.useTagged)(l);return Object(N.jsx)("button",{onClick:I,children:"win"===e?"\ud83d\ude0e":"lose"===e?"\ud83d\ude35":"\ud83d\ude0a"})},K=function(){var e=Object(i.useTagged)(v),t=Object(i.useTagged)(g),n=Object(i.useTagged)(b);return Object(N.jsxs)("span",{children:["Flags:",n?t:e]})},P=n(10),$=n.n(P),ee=function(){return Object(N.jsxs)("div",{className:$.a.statistics,children:[Object(N.jsx)(K,{}),Object(N.jsx)(G,{}),Object(N.jsx)(z,{})]})},te=n(11),ne=n.n(te),re=function(){return Object(N.jsxs)("main",{className:ne.a.app,children:[Object(N.jsx)(Z,{}),Object(N.jsx)(ee,{}),Object(N.jsx)(Y,{})]})};Object(o.render)(Object(N.jsx)(r.StrictMode,{children:Object(N.jsx)(re,{})}),document.getElementById("root"))},6:function(e,t,n){e.exports={board:"Board_board__1Y7VT",innerBoard:"Board_innerBoard__2YZye"}},8:function(e,t,n){e.exports={cell:"Cell_cell__3-ueS"}},9:function(e,t,n){e.exports={settings:"Settings_settings__3U6ep"}}},[[25,1,2]]]);
//# sourceMappingURL=main.f93f225c.chunk.js.map