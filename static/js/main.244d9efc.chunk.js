(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{24:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o,r,i,a,l,c=t(1),u=t(15),s=(t(24),t(3)),d=t(5),b=t(4),f=t(2),g=Object(f.createTagged)(null),j=function(e,n){for(var t,o=0,r=-1;r<=1;++r)for(t=-1;t<=1;++t){var i,a;(null===(a=null===(i=e.board[t+n.row])||void 0===i?void 0:i[r+n.col])||void 0===a?void 0:a.isBomb)&&++o}return o||null},v=function(e,n){for(var t,o,r,i,a=[n];a.length;)if((t=a.pop())&&!t.isOpened&&!t.isFlag&&(t.isOpened=!0,t.bombCount=j(e,t),e.cells-=1,!t.bombCount))for(r=-1;r<=1;++r)for(i=-1;i<=1;++i){var l;!(o=null===(l=e.board[i+t.row])||void 0===l?void 0:l[r+t.col])||-1!==a.indexOf(o)||o.isOpened||o.isFlag||a.push(o)}return e},O=t(19),m=t(12),p=function(e){return Object(m.a)(Object(m.a)({},e),{},{board:Object(O.a)(e.board)})},x=Object(f.createTagged)(null),h=Object(f.createTagged)(null),w=function(e){for(var n,t=0,o=e.board.length,r=e.board[0].length;t<o;++t)for(n=0;n<r;n++)e.board[t][n].isBomb&&(e.board[t][n].isFlag=!0);return e},T=function(){x(Date.now()),h("win"),g((function(e){return e&&w(p(e))}))},y=function(e){for(var n,t=0,o=e.board.length,r=e.board[0].length;t<o;++t)for(n=0;n<r;n++)e.board[t][n].isBomb&&(e.board[t][n].isOpened=!0);return e},B=function(){x(Date.now()),h("lose"),g((function(e){return e&&y(p(e))}))},C=function(e){var n;!e||e.isOpened||e.isFlag||(e.isBomb?B():(g((function(n){return n&&v(p(n),e)})),0===(null===(n=g())||void 0===n?void 0:n.cells)&&T()))},F=function(e,n){if(!e)return 0;for(var t,o,r=0,i=!1,a=-1;a<=1;++a)for(t=-1;t<=1;++t){var l,c,u;(null===(c=o=null===(l=e.board[t+n.row])||void 0===l?void 0:l[a+n.col])||void 0===c?void 0:c.isFlag)?r++:(null===(u=o)||void 0===u?void 0:u.isBomb)&&(i=!0)}return r===n.bombCount?i?-1:1:0},M=function(e,n){for(var t,o=-1;o<=1;++o)for(t=-1;t<=1;++t){var r;v(e,null===(r=e.board[t+n.row])||void 0===r?void 0:r[o+n.col])}return e},k=function(e){switch(F(g(),e)){case-1:return void B();case 1:var n;g((function(n){return n&&M(p(n),e)})),0===(null===(n=g())||void 0===n?void 0:n.cells)&&T()}},D=function(e,n){var t=n.isFlag;return e.board[n.row][n.col].isFlag=!t,e.flags+=t?1:-1,e},S=function(e){var n;!e.isOpened&&(e.isFlag||((null===(n=g())||void 0===n?void 0:n.flags)||0)>0)&&g((function(n){return n&&D(p(n),e)}))},I=function(e,n){return[Math.floor(Math.random()*n),Math.floor(Math.random()*e)]},E=function(e,n,t,o,r){for(var i,a=[],l=0,c=0;c<n;++c)for(a[c]=[],i=0;i<e;++i)a[c][i]={row:c,col:i,bombCount:null,isBomb:!1,isFlag:!1,isOpened:!1};for(;l<t;){var u=I(e,n),s=Object(b.a)(u,2);c=s[0],i=s[1],a[c][i].isBomb||c===o&&r===i||(a[c][i].isBomb=!0,++l)}return{board:a,flags:t,cells:e*n-t}},R=Object(f.createTagged)(30),V=Object(f.createTagged)(16),A=Object(f.createTagged)(99),H=Object(f.createTagged)(null),J=function(e,n){var t;g(E(R(),V(),A(),e,n)),H(Date.now()),C(null===(t=g())||void 0===t?void 0:t.board[e][n])},U=t(0),q=20,L=10,N="BOARD_ID",W={1:"blue",2:"green",3:"red",4:"purple",5:"maroon",6:"turquoise",7:"black",8:"gray"},X=function(e){var n,t=null===(n=document.getElementById(N))||void 0===n?void 0:n.getBoundingClientRect();return t?[Math.floor((e.clientY-t.top)/q),Math.floor((e.clientX-t.left)/q)]:[0,0]},Y=function(e,n){var t=n.cell,o=t.col*q,r=t.row*q;return e.fillStyle=t.isOpened?"aliceblue":"lightgray",e.fillRect(o,r,19,19),e.font="12px -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif",e.textAlign="center",e.textBaseline="middle",t.isOpened?t.isBomb?t.isFlag?void e.fillText("\u2705",o+L-1,r+L):void e.fillText("\ud83d\udca3",o+L-1,r+L):void(t.bombCount&&(W[t.bombCount]&&(e.fillStyle=W[t.bombCount]),e.fillText("".concat(t.bombCount),o+L-1,r+L))):t.isFlag?void e.fillText("\ud83d\udea9",o+L-1,r+L):void 0},_=function(e,n){var t=n.board,o=0,r=0,i=t.length,a=t[0].length;for(!function(e,n){var t=n.rows,o=n.cols;e.fillStyle="black",e.fillRect(0,0,o*q,t*q)}(e,{rows:i,cols:a});o<i;++o)for(r=0;r<a;++r)Y(e,{cell:t[o][r]})},z=function(){var e=Object(f.useTagged)(g),n=Object(f.useTagged)(h),t=Object(f.useTagged)(R),o=Object(f.useTagged)(V),r=e?e.board:E(t,o,0).board,i=r[0].length*q,a=r.length*q;return Object(c.useLayoutEffect)((function(){var e=document.getElementById(N).getContext("2d");e&&_(e,{board:r})}),[r]),Object(U.jsx)("canvas",{id:N,style:{width:i,height:a,userSelect:"none",cursor:"pointer",pointerEvents:n?"none":void 0},"data-is-over":!!n,width:i,height:a,onClick:function(n){var t=X(n),o=Object(b.a)(t,2),i=o[0],a=o[1];e?C(r[i][a]):J(i,a)},onDoubleClick:e?function(e){var n=X(e),t=Object(b.a)(n,2),o=t[0],i=t[1];k(r[o][i])}:void 0,onContextMenu:e?function(e){e.preventDefault();var n=X(e),t=Object(b.a)(n,2),o=t[0],i=t[1];S(r[o][i])}:void 0})},G=function(e,n,t){return Math.max(Math.min(n,t),e)},K=function(){var e=Object(f.useTagged)(R);return Object(U.jsxs)("label",{children:["Width:",Object(U.jsx)("input",{defaultValue:e,type:"number",onBlur:function(e){return R(G(8,+(e.target.value||0),99))},min:8,max:99},e)]})},P=function(){var e=Object(f.useTagged)(V);return Object(U.jsxs)("label",{children:["Height:",Object(U.jsx)("input",{defaultValue:e,type:"number",onBlur:function(e){return V(G(1,+(e.target.value||0),99))},min:8,max:99},e)]})},Q=function(){var e=Object(f.useTagged)(A);return Object(U.jsxs)("label",{children:["Bomb count:",Object(U.jsx)("input",{defaultValue:e,type:"number",onBlur:function(e){return A(G(0,+(e.target.value||0),R()*V()-1))},min:0,max:9800},e)]})},Z=d.a.div(o||(o=Object(s.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 10px;\n"]))),$=function(){return Object(U.jsxs)(Z,{children:[Object(U.jsx)(K,{}),Object(U.jsx)(P,{}),Object(U.jsx)(Q,{})]})},ee=function(){var e=Object(c.useReducer)((function(e){return e+1}),0),n=Object(b.a)(e,2)[1],t=Object(f.useTagged)(H),o=Object(f.useTagged)(x);return Object(c.useEffect)((function(){var e;return!o&&t&&(e=setInterval((function(){n()}),1e3)),function(){clearInterval(e)}}),[t,o]),Object(U.jsxs)("span",{children:["Time:",t?Math.floor(((o||Date.now())-t)/1e3):0]})},ne=function(){g(null),H(null),x(null),h(null)},te=function(){var e=Object(f.useTagged)(h);return Object(U.jsx)("button",{onClick:ne,children:"win"===e?"\ud83d\ude0e":"lose"===e?"\ud83d\ude35":"\ud83d\ude0a"})},oe=function(){var e=Object(f.useTagged)(A),n=Object(f.useTagged)(g(r||(r=Object(s.a)(["flags"]))));return Object(U.jsxs)("span",{children:["Flags:","number"===typeof n?n:e]})},re=d.a.div(i||(i=Object(s.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 10px;\n"]))),ie=function(){return Object(U.jsxs)(re,{children:[Object(U.jsx)(oe,{}),Object(U.jsx)(te,{}),Object(U.jsx)(ee,{})]})},ae=d.a.main(a||(a=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n    margin: auto;\n    height: calc(100vh - 20px);\n    padding-top: 20px;\n    width: calc(100vw - 40px);\n    align-items: center;\n"]))),le=d.a.section(l||(l=Object(s.a)(["\n    display: flex;\n    overflow: auto;\n    max-width: 100%;\n    border-top: 1px solid black;\n    border-left: 1px solid black;\n"]))),ce=function(){return Object(U.jsxs)(ae,{children:[Object(U.jsx)($,{}),Object(U.jsx)(ie,{}),Object(U.jsx)(le,{children:Object(U.jsx)(z,{})})]})};Object(u.render)(Object(U.jsx)(c.StrictMode,{children:Object(U.jsx)(ce,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.244d9efc.chunk.js.map