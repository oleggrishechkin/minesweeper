(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{22:function(n,e,t){},36:function(n,e,t){"use strict";t.r(e);var r,o,a,c,i,u,l,b=t(1),s=t.n(b),d=t(10),j=t.n(d),f=(t(22),t(4)),g=t(5),O=t(2),p=Object(O.createTagged)(null),m=Object(O.createTagged)(null),v=t(3),x=function(n,e){for(var t,r=0,o=-1;o<=1;++o)for(t=-1;t<=1;++t){var a,c;(null===(c=null===(a=n.board[t+e.row])||void 0===a?void 0:a[o+e.col])||void 0===c?void 0:c.isBomb)&&++r}return r||null},h=function(n,e){for(var t,r,o,a,c=[e];c.length;)if((t=c.pop())&&!t.isOpened&&!t.isFlag&&(t=n.board[t.row][t.col]=Object(v.a)(Object(v.a)({},t),{},{bombCount:x(n,t),isOpened:!0}),n.cells-=1,!t.bombCount))for(o=-1;o<=1;++o)for(a=-1;a<=1;++a){var i;!(r=null===(i=n.board[a+t.row])||void 0===i?void 0:i[o+t.col])||-1!==c.indexOf(r)||r.isOpened||r.isFlag||c.push(r)}return n},w=t(17),T=function(n){return Object(v.a)(Object(v.a)({},n),{},{board:Object(w.a)(n.board)})},y=Object(O.createTagged)(null),B=function(n){for(var e,t=0,r=n.board.length,o=n.board[0].length;t<r;++t)for(e=0;e<o;e++)n.board[t][e].isBomb&&(n.board[t][e]=Object(v.a)(Object(v.a)({},n.board[t][e]),{},{isFlag:!0}));return n},k=function(){y(Date.now()),m("win"),p((function(n){return B(T(n))}))},F=function(n){for(var e,t=0,r=n.board.length,o=n.board[0].length;t<r;++t)for(e=0;e<o;e++)n.board[t][e].isBomb&&(n.board[t][e]=Object(v.a)(Object(v.a)({},n.board[t][e]),{},{isOpened:!0}));return n},C=function(){y(Date.now()),m("lose"),p((function(n){return F(T(n))}))},M=function(n){n.isOpened||n.isFlag||(n.isBomb?C():(p((function(e){return h(T(e),n)})),0===p().cells&&k()))},D=function(n,e){for(var t,r,o=0,a=!1,c=-1;c<=1;++c)for(t=-1;t<=1;++t){var i,u,l;(null===(u=r=null===(i=n.board[t+e.row])||void 0===i?void 0:i[c+e.col])||void 0===u?void 0:u.isFlag)?o++:(null===(l=r)||void 0===l?void 0:l.isBomb)&&(a=!0)}return o===e.bombCount?a?-1:1:0},I=function(n,e){for(var t,r=-1;r<=1;++r)for(t=-1;t<=1;++t){var o;h(n,null===(o=n.board[t+e.row])||void 0===o?void 0:o[r+e.col])}return n},V=function(n){var e=D(p(),n);0!==e&&(-1!==e?(p((function(e){return I(T(e),n)})),0===p().cells&&k()):C())},E=function(n,e){var t=e.isFlag;return n.board[e.row][e.col]=Object(v.a)(Object(v.a)({},n.board[e.row][e.col]),{},{isFlag:!e.isFlag}),n.flags+=t?1:-1,n},J=function(n){!n.isOpened&&(n.isFlag||p().flags>0)&&p((function(e){return E(T(e),n)}))},q=g.a.button(r||(r=Object(f.a)(["\n    background: lightgray;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: none;\n    outline: none;\n    border-radius: 0;\n    border-right: 1px solid black;\n    border-bottom: 1px solid black;\n    cursor: pointer;\n    &:active {\n        background: aliceblue;\n    }\n    &[data-is-opened='true'] {\n        background: aliceblue;\n    }\n    &[data-count='1'] {\n        color: blue;\n    }\n    &[data-count='2'] {\n        color: green;\n    }\n    &[data-count='3'] {\n        color: red;\n    }\n    &[data-count='4'] {\n        color: purple;\n    }\n    &[data-count='5'] {\n        color: maroon;\n    }\n    &[data-count='6'] {\n        color: turquoise;\n    }\n    &[data-count='7'] {\n        color: black;\n    }\n    &[data-count='8'] {\n        color: gray;\n    }\n"]))),A=t(0),H=Object(b.memo)((function(n){var e=n.cell;return Object(A.jsxs)(q,{"data-is-opened":e.isOpened,"data-count":e.bombCount,onClick:function(){return M(e)},onDoubleClick:function(){return V(e)},onContextMenu:function(n){n.preventDefault(),J(e)},children:[!e.isOpened&&e.isFlag&&"\ud83d\udea9",e.isOpened&&e.isBomb&&(e.isFlag?"\u2705":"\ud83d\udca3"),e.isOpened&&!e.isBomb&&!e.isFlag&&e.bombCount]})})),R=g.a.div(o||(o=Object(f.a)(["\n    display: grid;\n    grid-template-rows: repeat(var(--rows), 20px);\n    grid-template-columns: repeat(var(--columns), 20px);\n    user-select: none;\n    &[data-is-over='true'] {\n        pointer-events: none;\n    }\n"]))),S=Object(O.createTagged)(30),W=Object(O.createTagged)(16),z=t(8),G=function(n,e){return[Math.floor(Math.random()*e),Math.floor(Math.random()*n)]},K=function(n,e,t,r,o){for(var a,c=[],i=0,u=0;u<e;++u)for(c[u]=[],a=0;a<n;++a)c[u][a]={id:u*n+a,row:u,col:a,bombCount:null,isBomb:!1,isFlag:!1,isOpened:!1};for(;i<t;){var l=G(n,e),b=Object(z.a)(l,2);u=b[0],a=b[1],c[u][a].isBomb||u===r&&o===a||(c[u][a].isBomb=!0,++i)}return{board:c,flags:t,cells:n*e-t}},L=Object(O.createTagged)(99),N=Object(O.createTagged)(null),P=function(n,e){p(K(S(),W(),L(),n,e)),N(Date.now()),M(p().board[n][e])},Q=Object(b.memo)((function(n){var e=n.index,t=n.width;return Object(A.jsx)(q,{onClick:function(){var n=Math.floor(e/t);P(n,e-n*t)},onContextMenu:function(n){n.preventDefault()}})})),U=function(){var n=Object(O.useTagged)(S),e=Object(O.useTagged)(W);return Object(A.jsx)(R,{style:{"--rows":e,"--columns":n},children:new Array(n*e).fill(null).map((function(e,t){return Object(A.jsx)(Q,{index:t,width:n},t)}))})},X=function(){var n=Object(O.useTagged)(p),e=Object(O.useTagged)(m);return n?Object(A.jsx)(R,{style:{"--rows":n.board.length,"--columns":n.board[0].length},"data-is-over":!!e,children:n.board.map((function(n){return n.map((function(n){return Object(A.jsx)(H,{cell:n},n.id)}))}))}):Object(A.jsx)(U,{})},Y=function(n,e,t){return Math.max(Math.min(e,t),n)},Z=function(){var n=Object(O.useTagged)(S);return Object(A.jsxs)("label",{children:["Width:",Object(A.jsx)("input",{defaultValue:n,type:"number",onBlur:function(n){return S(Y(8,n.target.value,99))},min:8,max:99},n)]})},$=function(){var n=Object(O.useTagged)(W);return Object(A.jsxs)("label",{children:["Height:",Object(A.jsx)("input",{defaultValue:n,type:"number",onBlur:function(n){return W(Y(1,n.target.value,99))},min:8,max:99},n)]})},_=function(){var n=Object(O.useTagged)(L);return Object(A.jsxs)("label",{children:["Bomb count:",Object(A.jsx)("input",{defaultValue:n,type:"number",onBlur:function(n){return L(Y(0,n.target.value,S()*W()-1))},min:0,max:9800},n)]})},nn=g.a.div(a||(a=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 10px;\n"]))),en=function(){return Object(A.jsxs)(nn,{children:[Object(A.jsx)(Z,{}),Object(A.jsx)($,{}),Object(A.jsx)(_,{})]})},tn=function(){var n=Object(b.useReducer)((function(n){return n+1}),0),e=Object(z.a)(n,2)[1],t=Object(O.useTagged)(N),r=Object(O.useTagged)(y);return Object(b.useEffect)((function(){var n;return!r&&t&&(n=setInterval((function(){e()}),1e3)),function(){clearInterval(n)}}),[t,r]),Object(A.jsxs)("span",{children:["Time:",t?Math.floor(((r||Date.now())-t)/1e3):0]})},rn=function(){p(null),N(null),y(null),m(null)},on=function(){var n=Object(O.useTagged)(m);return Object(A.jsx)("button",{onClick:rn,children:"win"===n?"\ud83d\ude0e":"lose"===n?"\ud83d\ude35":"\ud83d\ude0a"})},an=function(){var n=Object(O.useTagged)(L),e=Object(O.useTagged)(p(c||(c=Object(f.a)(["flags"]))));return Object(A.jsxs)("span",{children:["Flags:","number"===typeof e?e:n]})},cn=g.a.div(i||(i=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 10px;\n"]))),un=function(){return Object(A.jsxs)(cn,{children:[Object(A.jsx)(an,{}),Object(A.jsx)(on,{}),Object(A.jsx)(tn,{})]})},ln=g.a.main(u||(u=Object(f.a)(["\n    display: flex;\n    flex-direction: column;\n    margin: auto;\n    height: calc(100vh - 20px);\n    padding-top: 20px;\n    width: calc(100vw - 40px);\n    align-items: center;\n"]))),bn=g.a.section(l||(l=Object(f.a)(["\n    display: flex;\n    overflow: auto;\n    max-width: 100%;\n    border-top: 1px solid black;\n    border-left: 1px solid black;\n"]))),sn=function(){return Object(A.jsxs)(ln,{children:[Object(A.jsx)(en,{}),Object(A.jsx)(un,{}),Object(A.jsx)(bn,{children:Object(A.jsx)(X,{})})]})};j.a.render(Object(A.jsx)(s.a.StrictMode,{children:Object(A.jsx)(sn,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.e68437da.chunk.js.map